export const state =()=>({
    //productss:[this.$fire.database.ref('products')],
    products:[{"id":1,"name":"Koronadan Korunmak Mümkün","img":"https://i.dr.com.tr/cache/154x170-0/originals/0001895541001-1.jpg","author":"Dr. Ümit Aktaş","publisher":"Alfa Yayıncılık","kapak":"İnce Kapak","pricewd":19.00 ,"price":13.30  ,"discount":30},
    {"id":2,"name":"Dürüst Yalancı","img":"https://i.dr.com.tr/cache/154x170-0/originals/0001894524001-1.jpg","author":"Tove Jansson","publisher":"Siren Yayınları","kapak":"İnce Kapak","pricewd":24.00 ,"price":18.00 ,"discount":25},
    {"id":3,"name":"Camları Kırın Kuşlar Kurtulsun","img":"https://i.dr.com.tr/cache/154x170-0/originals/0001893223001-1.jpg","author":"Fatoş Güney","publisher":"İthaki Yayınları","kapak":"İnce Kapak","pricewd":38.00 ,"price":23.94 ,"discount":37},
    {"id":4,"name":"Mutsuz Olan Cennete Gidemez","img":"https://i.dr.com.tr/cache/154x170-0/originals/0001894661001-1.jpg","author":"Zaza Yurtsever","publisher":"Destek Yayınları","kapak":"İnce Kapak","pricewd":29.00 ,"price":21.75 ,"discount":25},
    {"id":5,"name":"Terapi Odasında İyileşen İlişkiler","img":"https://i.dr.com.tr/cache/154x170-0/originals/0001894011001-1.jpg","author":"Bahar Tezcan","publisher":"Küsurat","kapak":"İnce Kapak","pricewd":34.00 ,"price":20.40 ,"discount":40},
    {"id":6,"name":"Pinball 1973","img":"https://i.dr.com.tr/cache/154x170-0/originals/0001895640001-1.jpg","author":"Ömer Yenici","publisher":"Nemesis Kitap","kapak":"İnce Kapak","pricewd":32.00 ,"price":23.36,"discount":27}],
    sproducts:[{"id":1,"name":"Koronadan Korunmak Mümkün","img":"https://i.dr.com.tr/cache/154x170-0/originals/0001895541001-1.jpg","author":"Dr. Ümit Aktaş","publisher":"Alfa Yayıncılık","kapak":"İnce Kapak","pricewd":19.00 ,"price":13.30  ,"discount":30},
    {"id":2,"name":"Dürüst Yalancı","img":"https://i.dr.com.tr/cache/154x170-0/originals/0001894524001-1.jpg","author":"Tove Jansson","publisher":"Siren Yayınları","kapak":"İnce Kapak","pricewd":24.00 ,"price":18.00 ,"discount":25},
    {"id":3,"name":"Camları Kırın Kuşlar Kurtulsun","img":"https://i.dr.com.tr/cache/154x170-0/originals/0001893223001-1.jpg","author":"Fatoş Güney","publisher":"İthaki Yayınları","kapak":"İnce Kapak","pricewd":38.00 ,"price":23.94 ,"discount":37},
    {"id":4,"name":"Mutsuz Olan Cennete Gidemez","img":"https://i.dr.com.tr/cache/154x170-0/originals/0001894661001-1.jpg","author":"Zaza Yurtsever","publisher":"Destek Yayınları","kapak":"İnce Kapak","pricewd":29.00 ,"price":21.75 ,"discount":25},
    {"id":5,"name":"Terapi Odasında İyileşen İlişkiler","img":"https://i.dr.com.tr/cache/154x170-0/originals/0001894011001-1.jpg","author":"Bahar Tezcan","publisher":"Küsurat","kapak":"İnce Kapak","pricewd":34.00 ,"price":20.40 ,"discount":40}],
    sliders:[{"sliderid":1,"img":"https://i.dr.com.tr/pimages/Content/Uploads/BannerFiles/dr/0420_d_u_x_851x373_lego_cocukluk_hayalim.jpg"},
    {"sliderid":2,"img":"https://i.dr.com.tr/pimages/Content/Uploads/BannerFiles/dr/1020_d_t_13_851x373_dogan_yayin.jpg"},
    {"sliderid":3,"img":"https://i.dr.com.tr/pimages/Content/Uploads/BannerFiles/dr/1020_d_u_x_851x373_haftanin_yazari_buket_uzuner.jpg"},
    {"sliderid":4,"img":"https://i.dr.com.tr/pimages/Content/Uploads/BannerFiles/dr/1020_d_t_5_851x373_egitim_ve_test_kitaplari.jpg"},
    {"sliderid":5,"img":"https://i.dr.com.tr/pimages/Content/Uploads/BannerFiles/dr/1020_d_u_x_851x373_lego_adult_rev.jpg"},
    {"sliderid":6,"img":"https://i.dr.com.tr/pimages/Content/Uploads/BannerFiles/dr/851x373_MUHIT.png"},
    {"sliderid":7,"img":"https://i.dr.com.tr/pimages/Content/Uploads/BannerFiles/dr/1020_d_t_9_851x373_peppa_pig.jpg"},
    {"sliderid":8,"img":"https://i.dr.com.tr/pimages/Content/Uploads/BannerFiles/dr/thumbnail_1020_d_u_x_851x373_harry_potter_dragon_alley.jpg"},
    {"sliderid":9,"img":"https://i.dr.com.tr/pimages/Content/Uploads/BannerFiles/dr/1020_d_u_x_851x373_haftanin_firsati_indigo.jpg"},
    {"sliderid":10,"img":"https://i.dr.com.tr/pimages/Content/Uploads/BannerFiles/dr/851x373_KitaplariKurtaranKedi.png"},
    {"sliderid":11,"img":"https://i.dr.com.tr/pimages/Content/Uploads/BannerFiles/dr/S_ablon-Ana-Sayfa-2.jpg"},
    {"sliderid":12,"img":"https://i.dr.com.tr/pimages/Content/Uploads/BannerFiles/dr/ekim_dergiler_851x873_2.png"},
    {"sliderid":13,"img":"https://i.dr.com.tr/pimages/Content/Uploads/BannerFiles/dr/1219_d_t_34_851x373_ozel_kitaplar.jpg"},
    {"sliderid":14,"img":"https://i.dr.com.tr/pimages/Content/Uploads/BannerFiles/dr/851x373_POP_Ekim_PARAF_AXESS_851x373.jpg"},
    {"sliderid":15,"img":"https://i.dr.com.tr/pimages/Content/Uploads/BannerFiles/dr/taksit-sevenekleri-yeni.jpg"}],
    comments:[
        {"productId":1,"yorum_id":1,"comment_title":"Büşra","comment":"Faydalı, bilinçli olabilmek adına mutlaka okumasi gereken bir kitap","comment_date":"18.11.2020","sum":2},
        {"productId":1,"yorum_id":2,"comment_title":"Yorumum","comment":"Hızlıca elime ulaştı çok memnunum","comment_date":"16.11.2020","sum":2},
        {"productId":2,"yorum_id":1,"comment_title":"Harika","comment":"Çok güzel bir kitap","comment_date":"17.11.2020","sum":1},
        {"productId":3,"yorum_id":1,"comment_title":"Oyun","comment":"Çok güzel kesinkikle tavsiye ederim.","comment_date":"14.11.2020","sum":1},
        {"productId":4,"yorum_id":1,"comment_title":"Karamsarlığa kapıldığında başvurulacak bir başucu kitabı","comment":"Bu kitap, mutluluğu ararken, daha önce hiç bakmadığım yerlere bakmamı sağladı.","comment_date":"01.12.2020","sum":2},
        {"productId":4,"yorum_id":2,"comment_title":"Meraklısı","comment":"İnsanı aydınlatan bir rehber.","comment_date":"20.11.2020","sum":1},
        {"productId":5,"yorum_id":1,"comment_title":"Beğendim","comment":"Harika bir kitap tavsiye ediyorum.","comment_date":"20.11.2020","sum":1} ,
        {"productId":6,"yorum_id":1,"comment_title":"pinball","comment":"İyi bir roman","comment_date":"20.11.2020","sum":1} 
    ],
    images:[{img:"https://i.dr.com.tr/cache/500x400-0/originals/0001895541001-1.jpg"},
        {img:"https://i.dr.com.tr/cache/500x400-0/originals/0001894524001-1.jpg"},
        {img:"https://i.dr.com.tr/cache/500x400-0/originals/0001893223001-1.jpg"},
        {img:"https://i.dr.com.tr/cache/500x400-0/originals/0001894661001-1.jpg"},
        {img:"https://i.dr.com.tr/cache/500x400-0/originals/0001894011001-1.jpg"},
        {img:"https://i.dr.com.tr/cache/500x400-0/originals/0001895640001-1.jpg"}
    ],
    cart:[],
    count:1,
    authUser:' '
})

export const actions={
        addProductToCart (context,product)
        {
           const cartItem = context.state.cart.find(item=>item.id===product.id)
           if(!cartItem){
                context.commit('pushProductToCart',product.id)
           }
           else{
                context.commit('incrementItemQuantity',cartItem)
           }
           
        },
        denemeaction(context){
            context.commit('denemeaction')
        },
        urunusil(context,pindex)
        {
            context.commit('removeproduct',pindex)
        }
}
export const getters={
    cartProducts(state){
        return state.cart.map(cartItem=>{
            const product = state.products.find(product=>product.id===cartItem.id)
            return{
                img:product.img,
                name:product.name,    
                author:product.author,
                kapak:product.kapak, 
                pricewd:product.pricewd,
                price:product.price, 
                discount:product.discount,
                quantity:cartItem.quantity,
                pprice:product.price*cartItem.quantity
            }
        })
    },
    cartTotal(state,getters){
        return getters.cartProducts.reduce((total,product)=>total+product.price*product.quantity,0)
    },
    totalQuantity(state,getters){
        return getters.cartProducts.reduce((total,product)=>total+product.quantity,0)
    },
    productQuantity(state){
        return state.cart.length
    },
    urunleriGetir(state){
        return this.$fire.database.ref('products')
    },
    takeuser(state)
    {
        return state.authUser
    }
}
export const mutations={
    setProducts(state,products){
        state.products=products
    },
    pushProductToCart(state,productId)
    {
        state.cart.push({
            id:productId,
            quantity:1
        })
    },
    incrementItemQuantity(state,cartItem)
    {
        cartItem.quantity++
    },
    
    denemeaction(state){
        state.count++
    },
    removeproduct(state,pindex)
    {
        state.cart.splice(pindex,1)
       
    },
    takeUser(state,authUser){
        state.authUser=authUser
    }
}
